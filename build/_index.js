(function(e){function a(n,r,s){var o=!1;if(i){var a=[];e.each(u,function(){s.hasOwnProperty(this)&&(o=!0)&&a.push({name:this,val:s[this]})}),o&&(e.each(s,function(e){a.push({name:e,val:this})}),s=a)}e.each(s,function(i,s){o&&(i=s.name,s=s.val);if(e.isFunction(s)&&(!t||s.toString().indexOf(".__base")>-1)){var u=n[i]||function(){};r[i]=function(){var e=this.__base;this.__base=u;var t=s.apply(this,arguments);return this.__base=e,t}}else r[i]=s})}var t=function(){_}.toString().indexOf("_")>-1,n=function(){},r=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=!0,s={toString:""};for(var o in s)s.hasOwnProperty(o)&&(i=!1);var u=i?["toString","valueOf"]:null;e.inherit=function(){var t=arguments,i=e.isFunction(t[0]),s=i?t[0]:n,o=t[i?1:0]||{},u=t[i?2:1],f=o.__constructor||i&&s.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!i)return f.prototype=o,f.prototype.__self=f.prototype.constructor=f,e.extend(f,u);e.extend(f,s);var l=s.prototype,c=f.prototype=r(l);return c.__self=c.constructor=f,a(l,c,o),u&&a(s,f,u),f},e.inheritSelf=function(e,t,n){var r=e.prototype;return a(r,r,t),n&&a(e,e,n),e}})(jQuery),function(e){var t=0,n="__"+ +(new Date),r=function(){return"uniq"+ ++t};e.identify=function(e,t){if(!e)return r();var i="uniqueID"in e?"uniqueID":n;return t||i in e?e[i]:e[i]=r()}}(jQuery),function(e){e.isEmptyObject||(e.isEmptyObject=function(e){for(var t in e)return!1;return!0})}(jQuery),function(e){e.extend({debounce:function(e,t,n,r){arguments.length==3&&typeof n!="boolean"&&(r=n,n=!1);var i;return function(){var s=arguments;r=r||this,n&&!i&&e.apply(r,s),clearTimeout(i),i=setTimeout(function(){n||e.apply(r,s),i=null},t)}},throttle:function(e,t,n){var r,i,s;return function(){i=arguments,s=!0,n=n||this,r||function(){s?(e.apply(n,i),s=!1,r=setTimeout(arguments.callee,t)):r=null}()}}})}(jQuery),function(e){var t="__"+ +(new Date)+"storage",n=function(t,n){return e.identify(t)+(n?e.identify(n):"")},r={buildEventName:function(e){return e},on:function(r,i,s,o,u){if(typeof r=="string"){e.isFunction(i)&&(o=s,s=i,i=undefined);var a=n(s,o),f=this[t]||(this[t]={}),l=r.split(" "),c=0,h;while(r=l[c++]){r=this.buildEventName(r),h=f[r]||(f[r]={ids:{},list:{}});if(!(a in h.ids)){var p=h.list,d={fn:s,data:i,ctx:o,special:u};p.last?(p.last.next=d,d.prev=p.last):p.first=d,h.ids[a]=p.last=d}}}else{var v=this;e.each(r,function(e,t){v.on(e,t,i,u)})}return this},onFirst:function(e,t,n,r){return this.on(e,t,n,r,{one:!0})},un:function(r,i,s){if(typeof r=="string"||typeof r=="undefined"){var o=this[t];if(o)if(r){var u=r.split(" "),a=0,f;while(r=u[a++]){r=this.buildEventName(r);if(f=o[r])if(i){var l=n(i,s),c=f.ids;if(l in c){var h=f.list,p=c[l],d=p.prev,v=p.next;d?d.next=v:p===h.first&&(h.first=v),v?v.prev=d:p===h.last&&(h.last=d),delete c[l]}}else delete this[t][r]}}else delete this[t]}else{var m=this;e.each(r,function(e,t){m.un(e,t,s)})}return this},trigger:function(n,r){var i=this,s=i[t],o;typeof n=="string"?n=e.Event(i.buildEventName(o=n)):n.type=i.buildEventName(o=n.type),n.target||(n.target=i);if(s&&(s=s[n.type])){var u=s.list.first,a;while(u)n.data=u.data,a=u.fn.call(u.ctx||i,n,r),typeof a!="undefined"&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())),u.special&&u.special.one&&i.un(o,u.fn,u.ctx),u=u.next}return this}};e.observable=e.inherit(r,r)}(jQuery),function(e,t){function s(e,t,n){return(e?"__elem_"+e:"")+"__mod"+(t?"_"+t:"")+(n?"_"+n:"")}function o(t,n,r){e.isFunction(t)?n[s(r,"*","*")]=t:e.each(t,function(t,i){e.isFunction(i)?n[s(r,t,"*")]=i:e.each(i,function(e,i){n[s(r,t,e)]=i})})}function u(e,t){return t?Array.isArray(t)?function(n){var r=0,i=t.length;while(r<i)if(n.hasMod(e,t[r++]))return!0;return!1}:function(n){return n.hasMod(e,t)}:function(t){return t.hasMod(e)}}var n=[],r={},i={};this.BEM=e.inherit(e.observable,{__constructor:function(e,t,n){var r=this;r._modCache=e||{},r._processingMods={},r._params=t,r.params=null,n!==!1?r._init():r.afterCurrentEvent(function(){r._init()})},_init:function(){return!this._initing&&!this.hasMod("js","inited")&&(this._initing=!0,this.params||(this.params=e.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(e,t){return e.bind(t||this)},afterCurrentEvent:function(e,t){this.__self.afterCurrentEvent(this.changeThis(e,t))},trigger:function(e,t){return this.__base(e=this.buildEvent(e),t).__self.trigger(e,t),this},buildEvent:function(t){return typeof t=="string"&&(t=e.Event(t)),t.block=this,t},hasMod:function(e,n,r){var i=arguments.length,s=!1;i==1?(r="",n=e,e=t,s=!0):i==2&&(typeof e=="string"?(r=n,n=e,e=t):(r="",s=!0));var o=this.getMod(e,n)===r;return s?!o:o},getMod:function(e,t){var n=typeof e;if(n==="string"||n==="undefined"){t=e||t;var r=this._modCache;return t in r?r[t]:r[t]=this._extractModVal(t)}return this._getElemMod(t,e)},_getElemMod:function(e,t,n){return this._extractModVal(e,t,n)},getMods:function(e){var n=e&&typeof e!="string",r=this,i=[].slice.call(arguments,n?1:0),s=r._extractMods(i,n?e:t);return n||(i.length?i.forEach(function(e){r._modCache[e]=s[e]}):r._modCache=s),s},setMod:function(n,r,i){typeof i=="undefined"&&(i=r,r=n,n=t);var s=this;if(!n||n[0]){var o=(n&&n[0]?e.identify(n[0]):"")+"_"+r;if(this._processingMods[o])return s;var u,a=n?s._getElemMod(r,n,u=s.__self._extractElemNameFrom(n)):s.getMod(r);if(a===i)return s;this._processingMods[o]=!0;var f=!0,l=[r,i,a];n&&l.unshift(n),[["*","*"],[r,"*"],[r,i]].forEach(function(e){f=s._callModFn(u,e[0],e[1],l)!==!1&&f}),!n&&f&&(s._modCache[r]=i),f&&s._afterSetMod(r,i,a,n,u),delete this._processingMods[o]}return s},_afterSetMod:function(e,t,n,r,i){},toggleMod:function(e,n,r,i,s){typeof e=="string"&&(s=i,i=r,r=n,n=e,e=t),typeof i=="undefined"?i="":typeof i=="boolean"&&(s=i,i="");var o=this.getMod(e,n);return(o==r||o==i)&&this.setMod(e,n,typeof s=="boolean"?s?r:i:this.hasMod(e,n,r)?i:r),this},delMod:function(e,n){return n||(n=e,e=t),this.setMod(e,n,"")},_callModFn:function(e,n,r,i){var o=s(e,n,r);return this[o]?this[o].apply(this,i):t},_extractModVal:function(e,t){return""},_extractMods:function(e,t){return{}},channel:function(e,t){return this.__self.channel(e,t)},getDefaultParams:function(){return{}},del:function(e){var t=[].slice.call(arguments);return typeof e=="string"&&t.unshift(this),this.__self.del.apply(this.__self,t),this},destruct:function(){}},{_name:"i-bem",blocks:r,decl:function(n,i,s){typeof n=="string"?n={block:n}:n.name&&(n.block=n.name);if(n.baseBlock&&!r[n.baseBlock])throw'baseBlock "'+n.baseBlock+'" for "'+n.block+'" is undefined';i||(i={}),i.onSetMod&&(o(i.onSetMod,i),delete i.onSetMod),i.onElemSetMod&&(e.each(i.onElemSetMod,function(e,t){o(t,i,e)}),delete i.onElemSetMod);var a=r[n.baseBlock||n.block]||this;if(n.modName){var f=u(n.modName,n.modVal);e.each(i,function(n,r){e.isFunction(r)&&(i[n]=function(){var e;if(f(this))e=r;else{var s=a.prototype[n];s&&s!==i[n]&&(e=this.__base)}return e?e.apply(this,arguments):t})})}if(s&&typeof s.live=="boolean"){var l=s.live;s.live=function(){return l}}var c;return n.block==a._name?(c=e.inheritSelf(a,i,s))._processLive(!0):(c=r[n.block]=e.inherit(a,i,s))._name=n.block,c},_processLive:function(e){return!1},create:function(e,t){return typeof e=="string"&&(e={block:e}),new r[e.block](e.mods,t)},getName:function(){return this._name},_extractElemNameFrom:function(e){},afterCurrentEvent:function(e,t){n.push({fn:e,ctx:t})==1&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var e=n.length;if(e){var t,r=n.splice(0,e);while(t=r.shift())t.fn.call(t.ctx||this)}},changeThis:function(e,t){return e.bind(t||this)},del:function(e){var t=typeof e=="string",n=t?0:1,r=arguments.length;t&&(e=this);while(n<r)delete e[arguments[n++]];return this},channel:function(n,r){typeof n=="boolean"&&(r=n,n=t),n||(n="default");if(r){i[n]&&(i[n].un(),delete i[n]);return}return i[n]||(i[n]=new e.observable)}})}(jQuery),function(){Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t})}(),function(){var e=Array.prototype,t=Object.prototype.toString,n={indexOf:function(e,t){t=+(t||0);var n=this,r=n.length;if(r>0&&t<r){t=t<0?Math.ceil(t):Math.floor(t),t<-r&&(t=0),t<0&&(t+=r);while(t<r){if(t in n&&n[t]===e)return t;++t}}return-1},forEach:function(e,t){var n=-1,r=this,i=r.length;while(++n<i)n in r&&(t?e.call(t,r[n],n,r):e(r[n],n,r))},map:function(e,t){var n=-1,r=this,i=r.length,s=new Array(i);while(++n<i)n in r&&(s[n]=t?e.call(t,r[n],n,r):e(r[n],n,r));return s},filter:function(e,t){var n=-1,r=this,i=r.length,s=[];while(++n<i)n in r&&(t?e.call(t,r[n],n,r):e(r[n],n,r))&&s.push(r[n]);return s},reduce:function(e,t){var n=-1,r=this,i=r.length,s;if(arguments.length<2){while(++n<i)if(n in r){s=r[n];break}}else s=t;while(++n<i)n in r&&(s=e(s,r[n],n,r));return s},some:function(e,t){var n=-1,r=this,i=r.length;while(++n<i)if(n in r&&(t?e.call(t,r[n],n,r):e(r[n],n,r)))return!0;return!1},every:function(e,t){var n=-1,r=this,i=r.length;while(++n<i)if(n in r&&(t?!e.call(t,r[n],n,r):!e(r[n],n,r)))return!1;return!0}};for(var r in n)e[r]||(e[r]=n[r]);Array.isArray||(Array.isArray=function(e){return t.call(e)==="[object Array]"})}(),function(){var e=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(t){var n=this,r=e.call(arguments,1);return function(){return n.apply(t,r.concat(e.call(arguments)))}})}(),function(e,t,n){function o(e,t,n){n.push(r,e,r,t)}function u(e,t,n,r){r.push(e),n&&o(t,n,r)}function a(e,t,r,s,a){u(e,n,n,a),a.push(i,t),s&&o(r,s,a)}var r="_",i="__",s="[a-zA-Z0-9-]+";e.INTERNAL={NAME_PATTERN:s,MOD_DELIM:r,ELEM_DELIM:i,buildModPostfix:function(e,t,n){var r=n||[];return o(e,t,r),n?r:r.join("")},buildClass:function(e,t,r,i,s){var o=typeof r;o=="string"?typeof i!="string"&&(s=i,i=r,r=t,t=n):o!="undefined"?(s=r,r=n):t&&typeof t!="string"&&(s=t,t=n);if(!(t||r||s))return e;var f=s||[];return t?a(e,t,r,i,f):u(e,r,i,f),s?f:f.join("")},buildClasses:function(e,r,i,s){r&&typeof r!="string"&&(s=i,i=r,r=n);var o=s||[];return r?a(e,r,n,n,o):u(e,n,n,o),i&&t.each(i,function(t,n){n&&(o.push(" "),r?a(e,r,t,n,o):u(e,t,n,o))}),s?o:o.join("")}}}(BEM,jQuery),function(e,t,n){function y(e,n){var r=e[0];t.each(S(r),function(i,s){w(s,r,i,n);var o=u[s.uniqId];o?o.domElem.index(r)<0&&(o.domElem=o.domElem.add(e),t.extend(o._params,s)):b(i,e,s)})}function b(e,r,i,s,a){typeof i=="boolean"&&(a=s,s=i,i=n);var f=r[0];i=w(i||S(f)[e],f,e);var l=i.uniqId;if(u[l])return u[l]._init();o[l]=o[l]?o[l].add(r):r;var h=f.parentNode;(!h||h.nodeType===11)&&t.unique(o[l]);var p=c[e]||k.decl(e,{},{live:!0});if(!(p._liveInitable=!!p._processLive())||s||i.live===!1){var d=new p(o[l],i,!!s);return delete o[l],a&&a.apply(d,Array.prototype.slice.call(arguments,4)),d}}function w(e,n,r,i){(e||(e={})).uniqId||(e.uniqId=(e.id?r+"-id-"+e.id:t.identify())+(i||t.identify()));var s=t.identify(n),o=a[s]||(a[s]={});return o[r]||(o[r]=e),e}function E(e,t,n){var r=e.find(t);return n?r:r.add(e.filter(t))}function S(e){var n=t.identify(e);return a[n]||(a[n]=x(e))}function x(e){var n=e.onclick||e.ondblclick;if(!n&&e.tagName.toLowerCase()=="body"){var r=t(e),i=r.attr("onclick")||r.attr("ondblclick");i&&(n=Function(i))}return n?n():{}}function T(e){delete a[t.identify(e)]}function N(e,t){e.domElem.length===1?e.destruct(!0):e.domElem=e.domElem.not(t)}function C(){return i[0][t.support.boxModel?"documentElement":"body"]}var r=t(window),i=t(document),s=t("body"),o={},u={},a={},f={},l={},c=e.blocks,h=e.INTERNAL,p=h.NAME_PATTERN,d=h.MOD_DELIM,v=h.ELEM_DELIM,m=h.buildModPostfix,g=h.buildClass;t.fn.bem=function(e,t){return b(e,this,t,!0)};var k=e.DOM=e.decl("i-bem__dom",{__constructor:function(e,n,r){var i=this;i.domElem=e,i._eventNameCache={},i._elemCache={},u[i._uniqId=n.uniqId||t.identify(i)]=i,i._needSpecialUnbind=!1,i.__base(null,n,r)},findBlocksInside:function(e,t){return this._findBlocks("find",e,t)},findBlockInside:function(e,t){return this._findBlocks("find",e,t,!0)},findBlocksOutside:function(e,t){return this._findBlocks("parents",e,t)},findBlockOutside:function(e,t){return this._findBlocks("closest",e,t)[0]||null},findBlocksOn:function(e,t){return this._findBlocks("",e,t)},findBlockOn:function(e,t){return this._findBlocks("",e,t,!0)},_findBlocks:function(e,r,i,s){i||(i=r,r=n);var o=r?typeof r=="string"?this.findElem(r):r:this.domElem,u=typeof i=="string",a=u?i:i.block||i.blockName,f="."+(u?g(a):g(a,i.modName,i.modVal))+(s?":first":""),l=o.filter(f);e&&(l=l.add(o[e](f)));if(s)return l[0]?b(a,l.eq(0),!0):null;var c=[],h={};return t.each(l,function(e,n){var r=b(a,t(n),!0);h[r._uniqId]||(h[r._uniqId]=!0,c.push(r))}),c},bindToDomElem:function(e,n,r){var i=this;return r?e.bind(i._buildEventName(n),function(e){return(e.data||(e.data={})).domElem=t(this),r.apply(i,arguments)}):t.each(n,function(t,n){i.bindToDomElem(e,t,n)}),i},bindToDoc:function(e,t){return this._needSpecialUnbind=!0,this.bindToDomElem(i,e,t)},bindToWin:function(e,t){var n=t,i,s;return e==="resize"&&(t=function(){var e=r.height(),t=r.width();if(i!==e||s!==t)i=e,s=t,n.apply(this,arguments)}),this._needSpecialUnbind=!0,this.bindToDomElem(r,e,t)},bindTo:function(e,n,r){return!n||t.isFunction(n)?(r=n,n=e,e=this.domElem):typeof e=="string"&&(e=this.elem(e)),this.bindToDomElem(e,n,r)},unbindFromDomElem:function(e,t){return e.unbind(this._buildEventName(t)),this},unbindFromDoc:function(e){return this.unbindFromDomElem(i,e)},unbindFromWin:function(e){return this.unbindFromDomElem(r,e)},unbindFrom:function(e,t){return t?typeof e=="string"&&(e=this.elem(e)):(t=e,e=this.domElem),this.unbindFromDomElem(e,t)},_buildEventName:function(e){var t=this;return e.indexOf(" ")>1?e.split(" ").map(function(e){return t._buildOneEventName(e)}).join(" "):t._buildOneEventName(e)},_buildOneEventName:function(e){var t=this,n=t._eventNameCache;if(e in n)return n[e];var r="."+t._uniqId;if(e.indexOf(".")<0)return n[e]=e+r;var i=".bem_"+t.__self._name;return n[e]=e.split(".").map(function(e,t){return t==0?e+i:i+"_"+e}).join("")+r},trigger:function(e,t){return this.__base(e=this.buildEvent(e),t).domElem&&this._ctxTrigger(e,t),this},_ctxTrigger:function(e,n){var r=this,i=f[r.__self._buildCtxEventName(e.type)],s={};i&&r.domElem.each(function(){var o=this,u=i.counter;while(o&&u){var a=t.identify(o,!0);if(a){if(s[a])break;var f=i.ctxs[a];f&&(t.each(f,function(t,i){i.fn.call(i.ctx||r,e,n)}),u--),s[a]=!0}o=o.parentNode}})},setMod:function(e,n,r){if(e&&typeof r!="undefined"&&e.length>1){var i=this;return e.each(function(){var s=t(this);s.__bemElemName=e.__bemElemName,i.setMod(s,n,r)}),i}return this.__base(e,n,r)},_extractModVal:function(e,t,n){var r=(t||this.domElem)[0],i;return r&&(i=r.className.match(this.__self._buildModValRE(e,n||t))),i?i[2]:""},_extractMods:function(e,t){var n={},r=!e.length,i=0;return((t||this.domElem)[0].className.match(this.__self._buildModValRE("("+(r?p:e.join("|"))+")",t,"g"))||[]).forEach(function(e){var t=(e=e.trim()).lastIndexOf(d),r=e.substr(0,t-1).lastIndexOf(d);n[e.substr(r+1,t-r-1)]=e.substr(t+1),++i}),i<e.length&&e.forEach(function(e){e in n||(n[e]="")}),n},_afterSetMod:function(e,n,r,i,s){var o=this.__self,u=o._buildModClassPrefix(e,s),a=o._buildModValRE(e,s),f=n==="";(i||this.domElem).each(function(){var e=this.className;e.indexOf(u)>-1?this.className=e.replace(a,f?"":"$1"+u+n):f||t(this).addClass(u+n)}),s&&this.dropElemCache(s,e,r).dropElemCache(s,e,n)},findElem:function(e,t,n,r){arguments.length%2?(r=n,n=t,t=e,e=this.domElem):typeof e=="string"&&(e=this.findElem(e));var i=this.__self,s="."+t.split(" ").map(function(e){return g(i._name,e,n,r)}).join(",.");return E(e,s)},_elem:function(e,t,n){var r=e+m(t,n),i;return(i=this._elemCache[r])||(i=this._elemCache[r]=this.findElem(e,t,n),i.__bemElemName=e),i},elem:function(e,n,r){if(n&&typeof n!="string")return n.__bemElemName=e,n;if(e.indexOf(" ")<0)return this._elem(e,n,r);var i=t([]),s=this;return e.split(" ").forEach(function(e){i=i.add(s._elem(e,n,r))}),i},dropElemCache:function(e,t,n){if(e){var r=this,i=m(t,n);e.indexOf(" ")<0?delete r._elemCache[e+i]:e.split(" ").forEach(function(e){delete r._elemCache[e+i]})}else this._elemCache={};return this},elemParams:function(e){var t;return typeof e=="string"?(t=e,e=this.elem(e)):t=this.__self._extractElemNameFrom(e),x(e[0])[g(this.__self.getName(),t)]||{}},elemify:function(e,n){return(e=t(e)).__bemElemName=n,e},containsDomElem:function(e){var t=!1;return this.domElem.each(function(){return!(t=e.parents().andSelf().index(this)>-1)}),t},buildSelector:function(e,t,n){return this.__self.buildSelector(e,t,n)},destruct:function(e){var n=this,r=n.__self;n._isDestructing=!0,n._needSpecialUnbind&&r.doc.add(r.win).unbind("."+n._uniqId),n.dropElemCache().domElem.each(function(e,n){var r=S(n);t.each(r,function(e,t){var i=u[t.uniqId];i?i._isDestructing||(N(i,n),delete r[e]):delete o[t.uniqId]}),t.isEmptyObject(r)&&T(n)}),e||n.domElem.remove(),delete u[n.un()._uniqId],delete n.domElem,delete n._elemCache,n.__base()}},{scope:s,doc:i,win:r,_processLive:function(e){var t=this,n=t._liveInitable;if("live"in t){var r=typeof n=="undefined";r^e&&(n=t.live()!==!1,t.live=function(){})}return n},init:function(e,n,r){if(!e||t.isFunction(e))r=n,n=e,e=i;var s=t.identify();return E(e,".i-bem").each(function(){y(t(this),s)}),n&&this.afterCurrentEvent(function(){n.call(r||this,e)}),this._runAfterCurrentEventFns(),e},destruct:function(e,r,i){typeof e!="boolean"&&(i=r,r=e,e=n),E(r,".i-bem",i).each(function(e,n){var r=S(this);t.each(r,function(e,t){if(t.uniqId){var i=u[t.uniqId];i?(N(i,n),delete r[e]):delete o[t.uniqId]}}),t.isEmptyObject(r)&&T(this)}),e||(i?r.empty():r.remove())},update:function(e,t,n,r){this.destruct(e,!0),this.init(e.html(t),n,r)},replace:function(e,n){this.destruct(!0,e),this.init(t(n).replaceAll(e))},append:function(e,n){this.init(t(n).appendTo(e))},prepend:function(e,n){this.init(t(n).prependTo(e))},before:function(e,n){this.init(t(n).insertBefore(e))},after:function(e,n){this.init(t(n).insertAfter(e))},_buildCtxEventName:function(e){return this._name+":"+e},_liveClassBind:function(e,n,r,s){var o=this;if(n.indexOf(" ")>-1)n.split(" ").forEach(function(t){o._liveClassBind(e,t,r,s)});else{var u=l[n],a=t.identify(r);u||(u=l[n]={},i.bind(n,o.changeThis(o._liveClassTrigger,o))),u=u[e]||(u[e]={uniqIds:{},fns:[]}),a in u.uniqIds||(u.fns.push({uniqId:a,fn:o._buildLiveEventFn(r,s)}),u.uniqIds[a]=u.fns.length-1)}return this},_liveClassUnbind:function(e,n,r){var i=l[n];if(i)if(r){if(i=i[e]){var s=t.identify(r);if(s in i.uniqIds){var o=i.uniqIds[s],u=i.fns.length-1;i.fns.splice(o,1);while(o<u)i.uniqIds[i.fns[o++].uniqId]=o-1;delete i.uniqIds[s]}}}else delete i[e];return this},_liveClassTrigger:function(e){var n=l[e.type];if(n){var r=e.target,i=[];for(var s in n)n.hasOwnProperty(s)&&i.push(s);do{var o=" "+r.className+" ",u=0;while(s=i[u++])if(o.indexOf(" "+s+" ")>-1){var a=0,f=n[s].fns,c,h=!1;while(c=f[a++])c.fn.call(t(r),e)===!1&&(h=!0);h&&e.preventDefault();if(h||e.isPropagationStopped())return;i.splice(--u,1)}}while(i.length&&(r=r.parentNode))}},_buildLiveEventFn:function(e,n){var r=this;return function(i){var s=[r._name,((i.data||(i.data={})).domElem=t(this)).closest(r.buildSelector()),!0],o=b.apply(null,n?s.concat([e,i]):s);if(o&&!n&&e)return e.apply(o,arguments)}},liveInitOnEvent:function(e,t,n){return this.liveBindTo(e,t,n,!0)},liveBindTo:function(e,r,i,s){if(!r||t.isFunction(r))i=r,r=e,e=n;if(!e||typeof e=="string")e={elem:e};e.elemName&&(e.elem=e.elemName);var o=this;return e.elem&&e.elem.indexOf(" ")>0?(e.elem.split(" ").forEach(function(t){o._liveClassBind(g(o._name,t,e.modName,e.modVal),r,i,s)}),o):o._liveClassBind(g(o._name,e.elem,e.modName,e.modVal),r,i,s)},liveUnbindFrom:function(e,t,n){var r=this;return e.indexOf(" ")>1?(e.split(" ").forEach(function(e){r._liveClassUnbind(g(r._name,e),t,n)}),r):r._liveClassUnbind(g(r._name,e),t,n)},_liveInitOnBlockEvent:function(e,t,n,r){var i=this._name;return c[t].on(e,function(e){var t=arguments,s=e.block[r](i);n&&s.forEach(function(e){n.apply(e,t)})}),this},liveInitOnBlockEvent:function(e,t,n){return this._liveInitOnBlockEvent(e,t,n,"findBlocksOn")},liveInitOnBlockInsideEvent:function(e,t,n){return this._liveInitOnBlockEvent(e,t,n,"findBlocksOutside")},liveInitOnBlockInit:function(e,t){return this.liveInitOnBlockEvent("init",e,t)},liveInitOnBlockInsideInit:function(e,t){return this.liveInitOnBlockInsideEvent("init",e,t)},on:function(e,t,n,r,i){return e.jquery?this._liveCtxBind(e,t,n,r,i):this.__base(e,t,n,r)},un:function(e,t,n,r){return e.jquery?this._liveCtxUnbind(e,t,n,r):this.__base(e,t,n)},liveCtxBind:function(e,t,n,r,i){return this._liveCtxBind(e,t,n,r,i)},_liveCtxBind:function(e,r,i,s,o){var u=this;if(typeof r=="string"){t.isFunction(i)&&(o=s,s=i,i=n);if(r.indexOf(" ")>-1)r.split(" ").forEach(function(t){u._liveCtxBind(e,t,i,s,o)});else{var a=u._buildCtxEventName(r),l=f[a]||(f[a]={counter:0,ctxs:{}});e.each(function(){var e=t.identify(this),n=l.ctxs[e];n||(n=l.ctxs[e]={},++l.counter),n[t.identify(s)+(o?t.identify(o):"")]={fn:s,data:i,ctx:o}})}}else t.each(r,function(t,n){u._liveCtxBind(e,t,n,i)});return u},liveCtxUnbind:function(e,t,n,r){return this._liveCtxUnbind(e,t,n,r)},_liveCtxUnbind:function(e,n,r,i){var s=this,o=f[n=s._buildCtxEventName(n)];return o&&(e.each(function(){var e=t.identify(this,!0),n;if(e&&(n=o.ctxs[e])){r&&delete n[t.identify(r)+(i?t.identify(i):"")];if(!r||t.isEmptyObject(n))o.counter--,delete o.ctxs[e]}}),o.counter||delete f[n]),s},_extractElemNameFrom:function(e){if(e.__bemElemName)return e.__bemElemName;var t=e[0].className.match(this._buildElemNameRE());return t?t[1]:n},extractParams:x,_buildModClassPrefix:function(e,t){return g(this._name)+(t?v+(typeof t=="string"?t:this._extractElemNameFrom(t)):"")+d+e+d},_buildModValRE:function(e,t,n){return new RegExp("(\\s|^)"+this._buildModClassPrefix(e,t)+"("+p+")(?=\\s|$)",n)},_buildElemNameRE:function(){return new RegExp(this._name+v+"("+p+")(?:\\s|$)")},buildSelector:function(e,t,n){return"."+g(this._name,e,t,n)},getBlockByUniqId:function(e){return u[e]},getWindowSize:function(){return{width:r.width(),height:r.height()}}})}(BEM,jQuery),function(){String.prototype.trim||(String.prototype.trim=function(){var e=this.replace(/^\s\s*/,""),t=/\s/,n=e.length;while(t.test(e.charAt(--n)));return e.slice(0,n+1)})}(),$(function(){BEM.DOM.init()}),function(e){BEM.DOM.decl("form",{onSetMod:{js:function(){this._allInputs=this.elem("input").length,this._filledInputs=0}}},{live:function(){this.liveBindTo("input","change",function(){var e=this;this._filledInputs=0,this.elem("input").each(function(t){var n=$(this),r=n.attr("value");console.log(r.length>0),r.length>0&&e._filledInputs++}),this.elem("progress").width(e._filledInputs*100/e._allInputs+"%")})}})}(),function(e){var t=e.event.special.leftclick={setup:function(){e(this).bind("click",t.handler)},teardown:function(){e(this).unbind("click",t.handler)},handler:function(t){t.button||(t.type="leftclick",e.event.handle.apply(this,arguments),t.type="click")}}}(jQuery),BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.setMod("checked",this.elem("control").prop("checked")?"yes":""),this._isControlFocused()&&this.setMod("focused","yes")},focused:{yes:function(){if(this.isDisabled())return!1;this._isControlFocused()||this.elem("control").focus(),this.setMod(this.elem("box"),"focused","yes"),this.afterCurrentEvent(function(){this.trigger("focus")})},"":function(){this._isControlFocused()&&this.elem("control").blur(),this.delMod(this.elem("box"),"focused"),this.afterCurrentEvent(function(){this.trigger("blur")})}},checked:function(e,t){this.elem("control").prop("checked",t==="yes"),this.afterCurrentEvent(function(){this.trigger("change")}),this.setMod(this.elem("box"),"checked",t)},disabled:function(e,t){this.elem("control").prop("disabled",t==="yes")}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes","")},val:function(e){var t=this.elem("control");return typeof e=="undefined"?t.val():(t.val(e),this)},_onClick:function(e){if(this.isDisabled())return;e.target!==this.elem("control")[0]&&(e.preventDefault(),this.toggle()),this.setMod("focused","yes")},_onChange:function(e){e.target.checked?this.setMod("checked","yes"):this.delMod("checked")},_onFocusInFocusOut:function(e){this.setMod("focused",e.type==="focusin"?"yes":"")},_onMouseOverMouseOut:function(e){this.isDisabled()||this.setMod("hovered",e.type==="mouseover"?"yes":"")},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(e){return!1}}},{live:function(){return this.liveBindTo("leftclick",function(e){this._onClick(e)}).liveBindTo("control","change",function(e){this._onChange(e)}).liveBindTo("control","focusin focusout",function(e){this._onFocusInFocusOut(e)}).liveBindTo("mouseover mouseout",function(e){this._onMouseOverMouseOut(e)}),!1}}),function(e){BEM.DOM.decl("slide",{},{live:function(){this.liveBindTo("switcher","click",function(){this.toggleMod("closed","yes")})}})}(),BEM.DOM.decl("button",{onSetMod:{js:function(){var e=this.isDisabled(),t=this.domElem;(this._href=t.attr("href"))&&e&&t.removeAttr("href"),t.attr("disabled",e)},disabled:function(e,t){var n=t=="yes",r=this.domElem;this._href&&(n?r.removeAttr("href"):r.attr("href",this._href)),this.afterCurrentEvent(function(){r.attr("disabled",n)})},pressed:function(e,t){if(this.isDisabled())return!1;this.trigger(t=="yes"?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(e){return typeof e=="undefined"?this._href:(this._href=e,this.isDisabled()||this.domElem.attr("href",e),this)}}),BEM.DOM.decl("button",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._control=this.elem("control").length&&this.elem("control")||this.domElem},focused:{yes:function(){if(this.isDisabled())return!1;this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._control.focus(),this.afterCurrentEvent(function(){this.trigger("focus")})},"":function(){this.unbindFromWin("unload").unbindFrom("keydown"),this._isControlFocused()&&this._control.blur(),this.afterCurrentEvent(function(){this.trigger("blur")})}},disabled:function(e,t){this.__base.apply(this,arguments),t=="yes"&&this.domElem.keyup()},hovered:function(e,t){if(this.isDisabled())return!1;t===""&&this.delMod("pressed")},pressed:function(e,t){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(e){return!1}},_onKeyDown:function(e){var t=e.keyCode;(t==13||t==32)&&!this._keyDowned&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,t==32&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},_onClick:function(e){this.isDisabled()?e.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){var e={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}};this.liveBindTo("leftclick",function(e){this._onClick(e)}).liveBindTo("mouseover mouseout mouseup focusin focusout",function(t){var n=e[t.type];this.setMod(n.name,n.val||"")}).liveBindTo("mousedown",function(t){var n=e[t.type];t.which==1&&this.setMod(n.name,n.val||"")})}})